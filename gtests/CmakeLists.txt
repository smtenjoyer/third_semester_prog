cmake_minimum_required(VERSION 3.5.0)
project(ip_filter_tests)  # Имя проекта для тестов

# Подключаем Google Test с использованием FetchContent
include(FetchContent)
FetchContent_Declare(
    gtest
    GIT_REPOSITORY https://github.com/google/googletest.git
    GIT_TAG        release-1.11.0  # Укажите нужный релиз
)

# Загружаем Google Test
FetchContent_MakeAvailable(gtest)

# Указываем, что нам нужны C++ файлы для тестов
set(SOURCES test.cpp)  # Укажите ваш файл с тестами

# Создаем исполняемый файл для тестов
add_executable(ip_filter_tests ${SOURCES})

# Линковка тестов с Google Test
target_link_libraries(ip_filter_tests gtest gtest_main)

# Регистрируем тесты для CTest
include(CTest)
enable_testing()
add_test(NAME ip_filter_tests COMMAND ip_filter_tests)